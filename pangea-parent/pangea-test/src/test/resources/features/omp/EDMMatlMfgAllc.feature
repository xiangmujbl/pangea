@pangea_test @AEAZ-8803
Feature: EDMMatlMfgAllc AEAZ-8803

  Scenario: Check Full Rule

      Given I import "/project_one/plmz" by keyFields "plnty,plnnr,zuonr,zaehl"
      | plnty | plnnr    | zuonr | zaehl | datuv    | aennr        | loekz | plnal | plnfl | plnkn | stlty | stlnr    | stlal | stlkn | werk_stl |
      | N     | 50010779 | 1     | 1     | 20071018 |              |       | 1     | 0     | 1     | M     | 00010250 | 1     | 2     | CO01     |
      | N     | 50010779 | 2     | 2     | 20071018 |              |       | 1     | 0     | 1     | M     | 00010250 | 1     | 8     | CO01     |
      | N     | 50010779 | 3     | 3     | 20071018 |              |       | 1     | 0     | 1     | M     | 00010250 | 1     | 9     | CO01     |
      | N     | 50010779 | 4     | 4     | 20071018 |              |       | 1     | 0     | 1     | M     | 00010250 | 1     | 10    | CO01     |
      | N     | 50010779 | 5     | 5     | 20071018 |              | X     | 1     | 0     | 1     | M     | 00010250 | 1     | 13    | CO01     |
      | N     | 50010779 | 6     | 6     | 20071018 |              |       | 1     | 0     | 1     | M     | 00010250 | 1     | 16    | CO01     |
      | N     | 50010779 | 7     | 7     | 20071018 |              |       | 1     | 0     | 1     | M     | 00010250 | 1     | 17    | CO01     |
      | N     | 50010779 | 8     | 8     | 20071018 |              |       | 1     | 0     | 1     | M     | 00010250 | 1     | 21    | CO01     |
      | N     | 50010779 | 9     | 9     | 20071018 |              |       | 1     | 0     | 1     | M     | 00010250 | 1     | 22    | CO01     |
      | N     | 50010779 | 10    | 10    | 20071018 |              |       | 1     | 0     | 1     | M     | 00010250 | 1     | 23    | CO01     |
      | N     | 50010779 | 11    | 11    | 20071018 |              |       | 1     | 0     | 1     | M     | 00018459 | 1     | 2     | CO01     |
      | N     | 50010779 | 12    | 12    | 20071018 |              |       | 1     | 0     | 2     | M     | 00018459 | 1     | 3     | CO01     |
      | N     | 50010779 | 12    | 22    | 20111230 | 500000002848 | X     | 1     | 0     | 2     | M     | 00018459 | 1     | 3     | CO01     |
      | N     | 50010779 | 13    | 13    | 20071018 |              |       | 1     | 0     | 2     | M     | 00018459 | 1     | 4     | CO01     |
      | N     | 50010779 | 13    | 24    | 20111230 | 500000002848 | X     | 1     | 0     | 2     | M     | 00018459 | 1     | 4     | CO01     |
      | N     | 50010779 | 14    | 14    | 20071018 |              |       | 1     | 0     | 2     | M     | 00018459 | 1     | 5     | CO01     |
      | N     | 50010779 | 14    | 30    | 20111230 | 500000002848 | X     | 1     | 0     | 2     | M     | 00018459 | 1     | 5     | CO01     |
      | N     | 50010779 | 15    | 15    | 20071018 |              |       | 1     | 0     | 2     | M     | 00018459 | 1     | 6     | CO01     |
      | N     | 50010779 | 15    | 26    | 20111230 | 500000002848 | X     | 1     | 0     | 2     | M     | 00018459 | 1     | 6     | CO01     |
      | N     | 50010779 | 16    | 16    | 20090926 |              |       | 1     | 0     | 2     | M     | 00018459 | 1     | 8     | CO01     |
      | N     | 50010779 | 16    | 28    | 20111230 | 500000002848 | X     | 1     | 0     | 2     | M     | 00018459 | 1     | 8     | CO01     |
      | N     | 50010779 | 17    | 17    | 20090926 |              |       | 1     | 0     | 1     | M     | 00010250 | 1     | 33    | CO01     |
      | N     | 50010779 | 18    | 18    | 20090926 |              |       | 1     | 0     | 1     | M     | 00010250 | 1     | 34    | CO01     |
      | N     | 50010779 | 19    | 19    | 20090926 |              |       | 1     | 0     | 1     | M     | 00010250 | 1     | 39    | CO01     |
      | N     | 50010779 | 20    | 20    | 20090926 |              |       | 1     | 0     | 1     | M     | 00010250 | 1     | 40    | CO01     |
      | N     | 50010779 | 21    | 21    | 20090926 |              |       | 1     | 0     | 1     | M     | 00010250 | 1     | 41    | CO01     |
      | N     | 50010779 | 22    | 23    | 20111230 | 500000002848 |       | 1     | 0     | 1     | M     | 00018459 | 1     | 3     | CO01     |
      | N     | 50010779 | 23    | 25    | 20111230 | 500000002848 |       | 1     | 0     | 1     | M     | 00018459 | 1     | 4     | CO01     |
      | N     | 50010779 | 24    | 27    | 20111230 | 500000002848 |       | 1     | 0     | 1     | M     | 00018459 | 1     | 6     | CO01     |
      | N     | 50010779 | 25    | 29    | 20111230 | 500000002848 |       | 1     | 0     | 1     | M     | 00018459 | 1     | 8     | CO01     |
      | N     | 50010779 | 26    | 31    | 20120104 |              |       | 1     | 0     | 1     | M     | 00018459 | 1     | 11    | CO01     |
    And I wait "/project_one/plmz" Async Queue complete

    And I import "/edm/source_system_v1" by keyFields "localSourceSystem"
      | localSourceSystem | sourceSystem |
      | project_one       | CONS_LATAM   |
      | project_two       | CONS_LATAM   |
    And I wait "/edm/source_system_v1" Async Queue complete

    When I submit task with xml file "xml/omp/OMPGdmMatlMfgAllc.xml" and execute file "jar/pangea-view.jar"

    And wait 8000 millisecond

    Then I check region data "/edm/matl_mfg_allc" by keyFields "srcSysCd,rtngTypCd,rtngGrpCd,allocNum,allocCount"
      | srcSysCd   | rtngTypCd | rtngGrpCd | allocNum | allocCount | allocValidFrom | chgNum       | delInd | rtngGrpCntrNbr | rtngSqncNum | rtngNdeNum | bomCatCd | bomNum   | altBomNum | bomItmNdeNum | plntCd | allocValidTo |
      | CONS_LATAM | N         | 50010779  | 1        | 1          | 20071018       |              |        | 1              | 0           | 1          | M        | 00010250 | 1         | 2            | CO01   | 99991231     |
      | CONS_LATAM | N         | 50010779  | 2        | 2          | 20071018       |              |        | 1              | 0           | 1          | M        | 00010250 | 1         | 8            | CO01   | 99991231     |
      | CONS_LATAM | N         | 50010779  | 3        | 3          | 20071018       |              |        | 1              | 0           | 1          | M        | 00010250 | 1         | 9            | CO01   | 99991231     |
      | CONS_LATAM | N         | 50010779  | 4        | 4          | 20071018       |              |        | 1              | 0           | 1          | M        | 00010250 | 1         | 10           | CO01   | 99991231     |
      | CONS_LATAM | N         | 50010779  | 5        | 5          | 20071018       |              | X      | 1              | 0           | 1          | M        | 00010250 | 1         | 13           | CO01   | 99991231     |
      | CONS_LATAM | N         | 50010779  | 6        | 6          | 20071018       |              |        | 1              | 0           | 1          | M        | 00010250 | 1         | 16           | CO01   | 99991231     |
      | CONS_LATAM | N         | 50010779  | 7        | 7          | 20071018       |              |        | 1              | 0           | 1          | M        | 00010250 | 1         | 17           | CO01   | 99991231     |
      | CONS_LATAM | N         | 50010779  | 8        | 8          | 20071018       |              |        | 1              | 0           | 1          | M        | 00010250 | 1         | 21           | CO01   | 99991231     |
      | CONS_LATAM | N         | 50010779  | 9        | 9          | 20071018       |              |        | 1              | 0           | 1          | M        | 00010250 | 1         | 22           | CO01   | 99991231     |
      | CONS_LATAM | N         | 50010779  | 10       | 10         | 20071018       |              |        | 1              | 0           | 1          | M        | 00010250 | 1         | 23           | CO01   | 99991231     |
      | CONS_LATAM | N         | 50010779  | 11       | 11         | 20071018       |              |        | 1              | 0           | 1          | M        | 00018459 | 1         | 2            | CO01   | 99991231     |
      | CONS_LATAM | N         | 50010779  | 12       | 12         | 20071018       | 500000002848 |        | 1              | 0           | 2          | M        | 00018459 | 1         | 3            | CO01   | 20111230     |
      | CONS_LATAM | N         | 50010779  | 13       | 13         | 20071018       | 500000002848 |        | 1              | 0           | 2          | M        | 00018459 | 1         | 4            | CO01   | 20111230     |
      | CONS_LATAM | N         | 50010779  | 14       | 14         | 20071018       | 500000002848 |        | 1              | 0           | 2          | M        | 00018459 | 1         | 5            | CO01   | 20111230     |
      | CONS_LATAM | N         | 50010779  | 15       | 15         | 20071018       | 500000002848 |        | 1              | 0           | 2          | M        | 00018459 | 1         | 6            | CO01   | 20111230     |
      | CONS_LATAM | N         | 50010779  | 16       | 16         | 20090926       | 500000002848 |        | 1              | 0           | 2          | M        | 00018459 | 1         | 8            | CO01   | 20111230     |
      | CONS_LATAM | N         | 50010779  | 17       | 17         | 20090926       |              |        | 1              | 0           | 1          | M        | 00010250 | 1         | 33           | CO01   | 99991231     |
      | CONS_LATAM | N         | 50010779  | 18       | 18         | 20090926       |              |        | 1              | 0           | 1          | M        | 00010250 | 1         | 34           | CO01   | 99991231     |
      | CONS_LATAM | N         | 50010779  | 19       | 19         | 20090926       |              |        | 1              | 0           | 1          | M        | 00010250 | 1         | 39           | CO01   | 99991231     |
      | CONS_LATAM | N         | 50010779  | 20       | 20         | 20090926       |              |        | 1              | 0           | 1          | M        | 00010250 | 1         | 40           | CO01   | 99991231     |
      | CONS_LATAM | N         | 50010779  | 21       | 21         | 20090926       |              |        | 1              | 0           | 1          | M        | 00010250 | 1         | 41           | CO01   | 99991231     |
      | CONS_LATAM | N         | 50010779  | 22       | 23         | 20111230       | 500000002848 |        | 1              | 0           | 1          | M        | 00018459 | 1         | 3            | CO01   | 99991231     |
      | CONS_LATAM | N         | 50010779  | 23       | 25         | 20111230       | 500000002848 |        | 1              | 0           | 1          | M        | 00018459 | 1         | 4            | CO01   | 99991231     |
      | CONS_LATAM | N         | 50010779  | 24       | 27         | 20111230       | 500000002848 |        | 1              | 0           | 1          | M        | 00018459 | 1         | 6            | CO01   | 99991231     |
      | CONS_LATAM | N         | 50010779  | 25       | 29         | 20111230       | 500000002848 |        | 1              | 0           | 1          | M        | 00018459 | 1         | 8            | CO01   | 99991231     |
      | CONS_LATAM | N         | 50010779  | 26       | 31         | 20120104       |              |        | 1              | 0           | 1          | M        | 00018459 | 1         | 11           | CO01   | 99991231     |

    And I delete the test data

    And I will remove all data with region "/edm/matl_mfg_allc"